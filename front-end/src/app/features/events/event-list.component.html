<div class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="mb-12 text-center">
        <h1 class="mb-4 text-4xl font-bold text-gray-900">
            Discover Amazing Events
        </h1>
        <p class="mx-auto max-w-2xl text-xl text-gray-600">
            Find and book tickets for the best events happening around you
        </p>
    </div>

    <!-- Filters Section -->
    <div class="mb-8 rounded-lg bg-white p-6 shadow-md">
        <h2 class="mb-4 text-lg font-semibold text-gray-900">Filter Events</h2>

        <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4">
            <!-- Search -->
            <div>
                <label
                    for="search"
                    class="mb-1 block text-sm font-medium text-gray-700"
                    >Search</label
                >
                <input
                    id="search"
                    type="text"
                    [(ngModel)]="filters.search"
                    (input)="applyFilters()"
                    placeholder="Search events or venues..."
                    class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none"
                />
            </div>

            <!-- Venue -->
            <div>
                <label
                    for="venue"
                    class="mb-1 block text-sm font-medium text-gray-700"
                    >Venue</label
                >
                <input
                    id="venue"
                    type="text"
                    [(ngModel)]="filters.venue"
                    (input)="applyFilters()"
                    placeholder="Search venues..."
                    class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none"
                />
            </div>

            <!-- Date From -->
            <div>
                <label
                    for="dateFrom"
                    class="mb-1 block text-sm font-medium text-gray-700"
                    >From Date</label
                >
                <input
                    id="dateFrom"
                    type="date"
                    [(ngModel)]="dateFromInput"
                    (change)="applyFilters()"
                    class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none"
                />
            </div>

            <!-- Date To -->
            <div>
                <label
                    for="dateTo"
                    class="mb-1 block text-sm font-medium text-gray-700"
                    >To Date</label
                >
                <input
                    id="dateTo"
                    type="date"
                    [(ngModel)]="dateToInput"
                    (change)="applyFilters()"
                    class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none"
                />
            </div>
        </div>

        <!-- Clear Filters Button -->
        <div class="mt-4">
            <button
                (click)="clearFilters()"
                class="rounded-md bg-gray-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-gray-600"
            >
                Clear All Filters
            </button>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="py-12 text-center">
        <div
            class="inline-block h-12 w-12 animate-spin rounded-full border-b-2 border-blue-600"
        ></div>
        <p class="mt-4 text-gray-600">Loading events...</p>
    </div>

    <!-- Events Grid -->
    <div
        *ngIf="!isLoading"
        class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3"
    >
        <div
            *ngFor="let event of filteredEvents"
            class="overflow-hidden rounded-lg bg-white shadow-md transition-shadow hover:shadow-lg"
        >
            <!-- Event Image -->
            <div class="relative h-48 bg-gray-200">
                <img
                    [src]="event.image"
                    [alt]="event.title"
                    class="h-full w-full object-cover"
                />
                <div class="absolute top-4 right-4">
                    <span
                        [class]="
                            getAvailabilityStatus(event).class +
                            ' rounded-full bg-white px-2 py-1 text-xs font-medium'
                        "
                    >
                        {{ getAvailabilityStatus(event).text }}
                    </span>
                </div>
            </div>

            <!-- Event Details -->
            <div class="p-6">
                <h3 class="mb-2 text-xl font-semibold text-gray-900">
                    {{ event.title }}
                </h3>
                <p class="mb-4 line-clamp-3 text-sm text-gray-600">
                    {{ event.description }}
                </p>

                <!-- Event Info -->
                <div class="mb-4 space-y-2">
                    <div class="flex items-center text-sm text-gray-600">
                        <svg
                            class="mr-2 h-4 w-4"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                            ></path>
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                            ></path>
                        </svg>
                        {{ event.venue }}
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <svg
                            class="mr-2 h-4 w-4"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                            ></path>
                        </svg>
                        {{ formatDate(event.date) }} at {{ event.time }}
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <svg
                            class="mr-2 h-4 w-4"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"
                            ></path>
                        </svg>
                        {{ event.availableTickets }} /
                        {{ event.totalTickets }} tickets available
                    </div>
                </div>

                <!-- Price and Book Button -->
                <div class="flex items-center justify-between">
                    <div>
                        <span class="text-2xl font-bold text-blue-600">{{
                            formatPrice(event.price)
                        }}</span>
                        <span class="ml-1 text-sm text-gray-600"
                            >per ticket</span
                        >
                    </div>
                    <a
                        [routerLink]="['/events', event.id]"
                        class="rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700"
                        [class.opacity-50]="event.availableTickets === 0"
                        [class.pointer-events-none]="
                            event.availableTickets === 0
                        "
                    >
                        {{
                            event.availableTickets === 0
                                ? 'Sold Out'
                                : 'View Details'
                        }}
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- No Events Found -->
    <div
        *ngIf="!isLoading && filteredEvents.length === 0"
        class="py-12 text-center"
    >
        <div class="mb-4 text-gray-400">
            <svg
                class="mx-auto h-16 w-16"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                ></path>
            </svg>
        </div>
        <h3 class="mb-2 text-xl font-semibold text-gray-900">
            No events found
        </h3>
        <p class="text-gray-600">
            Try adjusting your filters to find more events.
        </p>
    </div>
</div>
